# Divitage WinUI 3 アプリケーション

## 新機能

このアップデートでは、以下の機能が追加されました：

### 1. FFmpeg統合
- **Xabe.FFmpeg**ライブラリを使用した実際のメディアファイル変換
- 自動的なFFmpegバイナリのダウンロードと設定
- サポートされるフォーマット：
  - ビデオ: mp4, avi, mkv, mov, wmv, flv, webm, m4v, mpg, mpeg
  - オーディオ: mp3, wav, flac, aac, ogg, m4a, wma, opus
  - 画像: jpg, jpeg, png, gif, bmp, webp, tiff

### 2. 変換プロファイル
- 複数の変換プロファイルのサポート
  - 標準品質
  - 高品質
  - 高速変換
  - Web最適化
  - 音声のみ
- プロファイルのカスタマイズ機能
- プロファイルの保存と読み込み（JSON形式）

### 3. 変換オプション
- 出力フォーマットの選択
- ビデオコーデック、オーディオコーデックの選択
- ビットレート設定
- 解像度の変更
- フレームレート調整
- 品質プリセット（ultrafast～veryslow）
- CRF品質値の調整
- ハードウェアアクセラレーションのサポート

### 4. UI/UX強化
- **プログレスバー**: リアルタイムで変換進捗を表示
- **変換履歴**:
  - 変換履歴の記録と表示
  - 成功/失敗の統計情報
  - ファイルサイズと変換時間の追跡
- **テーマ切り替え**:
  - システム設定に従う
  - ライトモード
  - ダークモード

### 5. 設定機能
- 出力ディレクトリの設定
- タイムスタンプの保持
- 自動クリーンアップ
- ログイン時の起動設定
- 履歴保持期間の設定（1-365日）

## アーキテクチャ

### Models
- `ConversionOptions`: 変換設定を表すモデル
- `ConversionProfile`: 保存可能な変換プロファイル
- `ConversionHistoryItem`: 変換履歴アイテム

### Services
- `FFmpegConverterService`: FFmpegを使用した変換処理
- `ProfileService`: プロファイルの管理
- `HistoryService`: 履歴の管理

### Helpers
- `SettingsHelper`: アプリケーション設定の管理
- `WindowHelper`: ウィンドウハンドルの取得

## 使用方法

1. アプリケーションを起動すると、FFmpegが自動的にダウンロードされます
2. 変換プロファイルを選択します
3. ファイルまたはフォルダをドラッグ＆ドロップするか、ボタンで追加します
4. 「変換開始」ボタンをクリックして変換を実行します
5. プログレスバーで進捗を確認できます
6. 「履歴」ボタンで過去の変換履歴を確認できます

## 設定

設定ページでは以下を調整できます：
- アプリケーションのテーマ
- ログイン時の起動
- 自動クリーンアップ
- タイムスタンプの保持
- 履歴保持期間

## 技術スタック

- .NET 8.0
- WinUI 3 (Windows App SDK 1.5.4)
- Xabe.FFmpeg 5.2.6
- Newtonsoft.Json 13.0.3

## 今後の拡張予定

- プレビュー機能
- バッチ処理の強化
- より詳細な変換設定UI
- エクスポート/インポート機能の強化
